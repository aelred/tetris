addons:
  apt:
    sources:
      - george-edison55
    packages:
      - cmake

language: rust
rust:
  - nightly
  - beta
  - stable

matrix:
  allow_failures:
    - rust: nightly

dist: trusty

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y libsdl2-dev libsdl2-ttf-dev

after_success:
  - wget https://s3.amazonaws.com/mozilla-games/emscripten/releases/emsdk-portable.tar.gz
  - tar -xvf emsdk-portable.tar.gz
  - pushd emsdk-portable
  - ./emsdk update
  - ./emsdk install sdk-incoming-64bit
  - popd
  - rustup target add asmjs-unknown-emscripten
  - ./deploy.sh
